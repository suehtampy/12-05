<section id="scripts">
<h2>Buscar Logins</h2>

<input type="search" id="searchLogs" placeholder="üîé Digite o site..." oninput="buscarServidor()" />

<div id="resultadosBusca" style="margin-top:20px;"></div>

</section>

<section id="scripts">
  <h2>Terminal de Busca</h2>

  <div id="terminal" style="background:#000; color:#0f0; padding:15px; border-radius:10px; height:300px; overflow-y:auto; font-family:monospace; font-size:0.9rem;">
    <div>> Bem-vindo ao Cyber Terminal</div>
  </div>

  <input type="text" id="cmdInput" placeholder="Digite /buscar <site>" 
         style="width:100%;background:#111;border:none;color:#0f0;padding:10px;font-family:monospace;" />

</section>

<section id="scripts">
  <h2>Terminal de Busca de Logins</h2>

  <!-- Terminal -->
  <div id="terminal" style="
      background:#000;
      color:#0f0;
      padding:15px;
      border-radius:10px;
      height:300px;
      overflow-y:auto;
      font-family:monospace;
      font-size:0.9rem;
      margin-bottom:10px;
  ">
    <div>> Conectado ao Terminal de Logins</div>
  </div>

  <input type="text" id="cmdInput"
         placeholder="Digite: /buscar <termo>"
         style="
            width:100%;
            background:#111;
            border:none;
            color:#0f0;
            padding:10px;
            font-family:monospace;
         "/>
</section>

<script>
// Fun√ß√£o para escrever no terminal
function appendTerminal(texto) {
  const terminal = document.getElementById("terminal");
  terminal.innerHTML += "<div>> " + texto + "</div>";
  terminal.scrollTop = terminal.scrollHeight;
}

// Fun√ß√£o pra carregar o logins.txt
async function carregarLogins() {
  try {
    const res = await fetch("logins.txt");
    const txt = await res.text();
    return txt.split("\n").map(l => l.trim()).filter(l => l.length > 0);
  } catch (e) {
    appendTerminal("Erro ao carregar logins.txt");
    return [];
  }
}

// Quando o usu√°rio apertar ENTER
document.getElementById("cmdInput").addEventListener("keydown", async (e) => {
  if (e.key === "Enter") {
    const cmd = document.getElementById("cmdInput").value.trim();
    appendTerminal(cmd);

    if (cmd.startsWith("/buscar ")) {
      const termo = cmd.replace("/buscar ", "").trim();
      appendTerminal("Buscando por: " + termo);

      const linhas = await carregarLogins();
      const encontrados = [];

      linhas.forEach(linha => {
        const partes = linha.split(":");
        let url, login, senha;
        if (partes.length === 3) {
          [url, login, senha] = partes;
        } else if (partes.length === 4) {
          [, url, login, senha] = partes;
        } else return;

        if (url.toLowerCase().includes(termo.toLowerCase())) {
          encontrados.push({login, senha});
        }
      });

      if (encontrados.length === 0) {
        appendTerminal("Nenhum login encontrado.");
      } else {
        encontrados.forEach(item => {
          appendTerminal(item.login + ":" + item.senha);
        });
        appendTerminal("Total: " + encontrados.length + " resultado(s).");
      }

    } else {
      appendTerminal("Comando inv√°lido. Use /buscar <termo>");
    }

    document.getElementById("cmdInput").value = "";
  }
});
</script>
