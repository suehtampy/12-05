<section id="scripts">
  <h2 style="font-family: 'Orbitron',sans-serif; color:#a855f7; margin-bottom:20px;">Terminal de Busca de Logins</h2>

  <!-- Terminal container -->
  <div id="terminal" style="
      background:#000;
      color:#00FF00;
      padding:20px;
      border-radius:10px;
      height:300px;
      overflow-y:auto;
      font-family: 'Courier New', monospace;
      font-size:0.85rem;
      line-height:1.25em;
      border: 2px solid #2563eb;
  ">
    <div>> Conectado ao terminal</div>
    <div>> Digite /buscar &lt;termo&gt; e pressione ENTER</div>
  </div>

  <!-- Input do usuÃ¡rio -->
  <input type="text" id="cmdInput" placeholder="Digite aqui..." style="
      width:100%;
      margin-top:10px;
      background:#111;
      border: 2px solid #2563eb;
      padding:10px;
      font-family:'Courier New',monospace;
      color:#0f0;
      outline:none;
      border-radius:8px;
  "/>
</section>

<script>
// FunÃ§Ã£o para â€œprintarâ€ no terminal
function appendTerminal(text) {
  const terminal = document.getElementById("terminal");
  terminal.innerHTML += "<div>> " + text + "</div>";
  terminal.scrollTop = terminal.scrollHeight;
}

// Carrega o arquivo logins.txt
async function carregarLoginsTxt() {
  try {
    const res = await fetch("logins.txt");
    const txt = await res.text();
    return txt.split("\n").map(l => l.trim()).filter(l => l.length > 0);
  } catch {
    appendTerminal("âŒ Erro ao carregar logins.txt");
    return [];
  }
}

// Quando apertar ENTER...
document.getElementById("cmdInput").addEventListener("keydown", async (e) => {
  if (e.key === "Enter") {
    const cmd = e.target.value.trim();
    appendTerminal(cmd);

    if (cmd.startsWith("/buscar ")) {
      const termo = cmd.replace("/buscar ", "").trim();

      appendTerminal(`ğŸ” Buscando por "${termo}"...`);
      const linhas = await carregarLoginsTxt();
      const encontrados = [];

      linhas.forEach(linha => {
        const partes = linha.split(":");
        let url, login, senha;
        if (partes.length === 3) {
          [url, login, senha] = partes;
        } else if (partes.length === 4) {
          [, url, login, senha] = partes;
        }
        if (url.toLowerCase().includes(termo.toLowerCase())) {
          encontrados.push(`${login}:${senha}`);
        }
      });

      if (encontrados.length === 0) {
        appendTerminal("âš  Nenhum login encontrado.");
      } else {
        appendTerminal(`âœ” Resultados: ${encontrados.length}`);
        encontrados.forEach(item => appendTerminal(item));
      }
    } else {
      appendTerminal('â— Comando invÃ¡lido â€” use: /buscar <termo>');
    }

    document.getElementById("cmdInput").value = "";
  }
});
</script>
